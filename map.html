<!DOCTYPE html>
<html>
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="title" content="cgms-be" />
  <meta name="robots" content="index,follow" /> 
  <meta name="author" content="Julien" />
  <link rel="stylesheet" href="lib/bootstrap-3.3.6-dist/css/bootstrap.css"><!-- debug css version-->
  <link rel="stylesheet" href="lib/jquery-ui-1.12.0/jquery-ui.css">
  <link rel="stylesheet" href="lib/ol3.8.2/ol.css" type="text/css" />
  <link rel="stylesheet" href="css/style.css" type="text/css" />
 </head>
 <body> 
   
   <!-- navigation bar -->
   <nav class="navbar navbar-fixed-top header" role="navigation">
    <div>
     <ul class="nav navbar-nav navbar-left">
      <li><a href="#">Agrometeo</a></li>
     </ul>
    </div>
    <div>
     <ul class="nav navbar-nav navbar-right">
      <li><a class="hidden-xs" onclick="cgms.showMapPanel();" >Carte</a></li>
      <li><a class="hidden-xs" onclick="cgms.showGraphPanel();">Graphique</a></li>
      <li><a class="visible-xs" onclick="cgms.showMapPanel();" title="Carte"><img class="nav-icon" src="img/map_icon.png" alt="Map"></a></li>
      <li><a class="visible-xs" onclick="cgms.showGraphPanel();" title="Graphique"><img class="nav-icon" src="img/graph_icon.png" alt="Graph"></a></li>
     </ul>
    </div>
   </nav>
   
  <div class="container bodyContainer">
   <div class="row mapContainer"> 
   
    <!-- panel --> 
    <div id="collapseBtnXs" class="visible-xs">   
      <button type="button" class="btn"  onclick="cgms.collapsePanelXs();">+</button>
    </div>
       
    <div  id="panel" >
      
     <div id="collapseBtn" class="hidden-xs" >     
      <button type="button" class="btn btn-sm"  onclick="cgms.collapsePanel();"><</button>
     </div>
     
     <div class="container-fluid" id="panelContent"> 
      <div>
      <form role="form" id="generalForm">
      <label>Cartographie</label>
       <div class="form-group">
        <label for="variable">Variable</label>
        <select class="form-control" id="formVariable">
          <option value="temp">Température</option>
          <option value="prec">Précipitation</option>
          <option value="et0">ETO</option>
          <option value="ndvi">NDVI</option>
        </select>
        <label for="stat">Statistique</label>
        <select class="form-control" id="formStat">
          <option value="average">Moyenne</option>
          <option value="max">Maximum</option>
          <option value="min">Minimum</option>
          <option value="cumul">Cumul</option>
        </select>
        <label for="spatial">Découpage spatial</label>
        <select class="form-control" id="formSpatial">
          <option value="grid">Grille</option>
          <option value="level3">Communes</option>
          <option value="level2">Régions agricoles</option>
          <option value="level1">Pays</option>
        </select>
        <label for="date">Date</label>
        
        <input class="form-control formDate" type="text" id="formDate">

        <br>
        <div class="text-center" id="panelButtons">
         <button type="button" class="btn btn-sm" onclick="cgms.update();">Actualiser</button> 
         <button type="button" class="btn btn-sm" data-toggle="modal" data-target="#showData" onclick="cgms.showData()">Montrer les données</button> 
        </div>       
       </div>      
      </form>
      </div>
      
      <div id="legend" >
       <button type="button" class="close" aria-hidden="true" onclick="cgms.hideLegend()">&times;</button>
       <p>Légende</p>
       <img id="legendImg" class="text-center" src="http://localhost/cgi-bin/mapserv?map=/var/www/CGMS/proto/meteo_tx_postgis_legend.map&request=GetLegendGraphic&service=WMS&version=1.1.1&transparent=true&format=image%2Fpng&layer=meteo&data=geom%20from%20meteo20130608_grid">
      </div>
      
     </div>
    </div>
    
    <!-- map -->
    <div class="col-xs-12" id="map" ></div>
    
    <!-- graphs -->
    <div class="col-xs-12" id="graph" >   
     <div>
        <div class="graph-header">
         <h4 class="graph-title" id="graphTitle"></h4>
        </div>
        <div class="graph-body">
         <div id="graph-div"></div>
        </div>
        <div class="graph-footer">
        </div>
     </div>    
    </div>
    
   </div>
  </div>

  <!-- Modal window for data displaying -->
  <div class="modal fade" id="showData" role="dialog">
    <div class="modal-dialog">
  
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
         <button type="button" class="close" data-dismiss="modal">&times;</button>
         <h4 class="modal-title" id="tableTitle"></h4>
        </div>
        <div class="modal-body">
         <table class="table table-condensed table-striped" id="modal-table"></table>
        </div>
        <div class="modal-footer">
         <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>
 
  <!----
  <!-- Modal window for graphs 
  <div class="modal fade" id="showGraph" role="dialog">
    <div class="modal-dialog">
  
      <!-- Modal content
      <div class="modal-content">
        <div class="modal-header">
         <button type="button" class="close" data-dismiss="modal">&times;</button>
         <h4 class="modal-title" id="graphTitle"></h4>
        </div>
        <div class="modal-body">
         <div id="modal-graph"></div>
        </div>
        <div class="modal-footer">
         <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>
  -->
  
  <script type="text/javascript" src="lib/jquery-1.11.3.min.js"></script>
  <script type="text/javascript" src="lib/bootstrap-3.3.6-dist/js/bootstrap.js"></script>
  <script type="text/javascript" src="lib/jquery-ui-1.12.0/jquery-ui.js"></script>
  <script type="text/javascript" src="lib/ol3.8.2/ol-debug.js"></script> 
  <script type="text/javascript" src="lib/d3.js"></script> 
  <script type="text/javascript" src="map.js"></script>
  
 </body>  
</html>

